<html>
<head>
    <title>The Stuff of Trey</title>
    <link rel="stylesheet" href="./style.css" />
</head>

<body>

<h1>The Stuff of Trey</h1>
<sub>A place to put all of my random stuff.</sub>

<h2>Contents</h2>
<div>
    <ul>
        <li><a href='#but_why'>But why?</a></li>
        <li><a href='#xor'>XOR</a></li>
        <li><a href='#sin_plasma'>Sinusoidal Plasma</a></li>
        <li><a href='#perlin_water'>Perlin Water</a></li>
        <li><a href='#water_ripples'>Water Ripples</a></li>
        <li><a href='#plasma_ripples'>Plasma Ripples</a></li>
        <li><a href='#conway_life_4K'>Conway's Game of Life 4K</a></li>
		<li><a href='#inspiration'>Inspirational References</a></li>
        <li><a href='#donate'>Donate</a></li>
    </ul>
</div>

<h2><a id='but_why'>But why?</a></h2>
<div>
    <p>
        Why go through all of this trouble?  Why not just use Unity?  Why does this site look so weird?
    </p>

    <p>
        I enjoy putting together retro-pixel graphics games.  8-bit stuff.  That's surprisingly
        hard to do with a tool like Unity.  Even modern tools designed for 2D game work expect
        you to want a full 4K resolution with infinite colors and 1024x1024 sprites.  And the
        resulting redistributable files are huge.  It's all overkill for what I enjoy.
    </p>

    <p>
        I was previously working on a C++/SDL2 framework to build my games with,
        but I can only build on Windows and Linux.  What about my Apple and Android
        friends?  Luckily for us almost anything can run a website these days.  I'll be
        creating a series of demo pages here, each hopefully a little more complex than the
        one before.  Maybe in a couple of weeks we'll have some games to play here!
    </p>
</div>

<h2><a id='xor'>XOR</a></h2>
<div>
    <a href='games/xor.html'>Take a look!</a>

    <p>
        This is my first stab at a WebGL-based game framework.
        No sound or input, but it has a render and update loop.
        The big technical challenge here was being able to set a virtual resolution
        and palette, along with fullscreen capability.  Making the canvas fill the
        screen kept leading to smeared pixels due to unwanted smooth scaling.  I like my
        pixels jagged.  The solution I found was to first render to a framebuffer, then
        present that framebuffer to the canvas.  The palette and image data are merged
        together in a fragment shader.
    </p>

    <p>
        I feel conflicted about using the TWGL library.  It seems to be well-maintained,
        but since I'm working with 2D pixel graphics most of the functionality is probably
        unnecessary bloat.  I think I'll be slowly working the dependency out of my code
        in the coming weeks.
    </p>

    <h3>Sources</h3>
    <ul>
        <li><a href='https://github.com/treytomes/treytomes.github.io/blob/main/games/xor.js'>Source code for the demo.</a></li>
        <li><a href='https://stackoverflow.com/questions/19695658/emulating-palette-based-graphics-in-webgl-v-s-canvas-2d'>Emulating palette based graphics in WebGL v.s. Canvas 2D</a></li>
        <li><a href='https://webgl2fundamentals.org/webgl/lessons/webgl-qna-how-to-get-pixelize-effect-in-webgl-.html'>How to get pixelize effect in webgl?</a></li>
    </ul>
</div>

<h2><a id='sin_plasma'>Sinusoidal Plasma</a></h2>
<div>
    <a href='games/sin_plasma.html'>Take a look!</a>

    <p>
        Demo #2 is just a tiny bit more involved.  My sinusoidal plasma algorithm is based on
        some C# code from years ago, that was based on a fragment shader from even further back.
        The code could run a lot faster if I put everything inside of the fragment shader, but
        doing it like this with pixel manipulation better suits my long-term goals.
    </p>

    <p>
        If you're interested in seeing how this works, start with the onRender function's
        loop over the x- and y-coordinates, then see how some math is being done to
        combine the plasma_small and plasma_big results into a single color.  The hsv2rgb
        function isn't strictly necessary for this algorithm, but I found that it looks
        nicer than using just RGB.
    </p>

    <h3>Sources</h3>
    <ul>
        <li><a href='https://github.com/treytomes/treytomes.github.io/blob/main/games/sin_plasma.js'>Source code for the demo.</a></li>
    </ul>
</div>

<h2><a id='perlin_water'>Perlin Water</a></h2>
<div>
    <a href='games/perlin_water.html'>Take a look!</a>

    <p>
        This project was an exercise in how something can be mathematically correct and yet still wrong.
        I went through 3 different Perlin Noise algorithms before I finally found one that works
        efficiently in JavaScript.  The 1st algorithm is one I've used successfully for years,
        but just doesn't work here.  It think the problem has something to do with how JavaScript
        encodes floating-point number.  The 2nd algorithm worked great, aside from the fact that
        it was too slow to actually be usable for anything.  Combining the first 2 algorithms kinda
        worked, but I still had those weird floating-point errors.  The 3rd algorithm is one that
        I found one a page targetting Lua and JavaScript solutions to the Perlin noise problem,
        and was designed to be efficient more than correct.  Check out the source if you're
        interested; I left all 3 algorithms in place so you can experience my pain with me.
    </p>

    <h3>Sources</h3>
    <ul>
        <li><a href='https://github.com/treytomes/treytomes.github.io/blob/main/games/perlin_water.js'>Source code for the demo.</a></li>
        <li><a href='http://cs.nyu.edu/~perlin/noise/'>Improved Noise reference implementation</a></li>
        <li><a href='http://asserttrue.blogspot.com/2011/12/perlin-noise-in-javascript_31.html'>Perlin Noise in JavaScript</a></li>
    </ul>
</div>

<h2><a id='water_ripples'>Water Ripples</a></h2>
<div>
    <a href='games/water_ripples.html'>Take a look!</a>

    <p>
        Finally, an example with some interaction!  When you load up this demo you will see
        a black screen.  Switch to fullscreen and try clicking or pressing somewhere on the screen,
        and you should get water ripples coming out of wherever you touch.
    </p>

    <p>
        The hardest part of this project was probably dealing with the floating-point errors.
        If you look around line 117 in the JavaScript you will see that I finally took anything
        really small and chopped it down to 0.  Without that a really annoying static field would
        build around the perimeter of the screen.
    </p>

    <p>
        The mouse interaction was interesting.  I added a convertPosition function to bootstrap.js
        that uses the same viewport equations as the GL code to convert a real screen position
        into a virtual screen position, and if you scan further down you can see in the
        initialize function where I attach to the canvas event handlers.
    </p>

    <p>
        I've converted all of my previous demos to base themselves on the new GameCanvas class.
        The GameCanvas class can take an optional HTML5 canvas as a parameter; if this is null
        it'll just grab the first canvas it finds.  It also makes it simple to set the
        screenWidth and screenHeight to whatever size you want.
    </p>

    <h3>Sources</h3>
    <ul>
        <li><a href='https://github.com/treytomes/treytomes.github.io/blob/main/games/water_ripples.js'>Source code for the demo.</a></li>
    </ul>
</div>

<h2><a id='plasma_ripples'>Plasma Ripples</a></h2>
<div>
    <a href='games/plasma_ripples.html'>Take a look!</a>

    <p>
        This took a bit less time to put together, but I have really enjoyed the effect.
        A slight adjustment to what I do with the xOffset and yOffset from the wave calculator
        allowed me to merge it with the Sinusoidal Plasma demo.  Try clicking around on the
        screen when it loads and you'll see wave distortions travelling across the plasma!
    </p>

    <p>
        I'm gonna have to figure out a way to do this at full resolution and color depth,
        it's just too fun of an effect to pass up.
    </p>

    <h3>Sources</h3>
    <ul>
        <li><a href='https://github.com/treytomes/treytomes.github.io/blob/main/games/plasma_ripples.js'>Source code for the demo.</a></li>
    </ul>
</div>

<h2><a id='conway_life_4K'>Conway's Game of Life 4K</a></h2>
<div>
    <a href='games/conway_life_4K.html'>Take a look!</a>

    <p>
        I was inspired a bit by the Ant and Slime demo on the Coding Adventures YouTube channel.
        In this example I wrote a version of Conway's Game of Life that is executed completely
        in shaders.  In this case I have 2 shaders where the output of one feeds into the input
        of the other.  The cells are split so that each color channel represents a simulation
        that doesn't directly interact with the others.  I added a fade effect so that dead
        cells slowly go to black instead of immediately turning off that I am pretty happy with.
    </p>

    <p>
        Because it runs completely in shaders I'm able to get good performance at a really
        high resolution.  Eventually the simulation will run to a standstill and you'll
        need to refresh your browser.
    </p>

    <p>
        I'll probably come back to this one later.
    </p>

    <h3>Sources</h3>
    <ul>
        <li><a href='https://github.com/treytomes/treytomes.github.io/blob/main/games/conway_life_4k.js'>Source code for the demo.</a></li>
    </ul>
</div>

<h2><a id ='inspiration'>Inspirational Websites</a></h2>
<div>
	<p>
		I just love the style of these sites.  I've sought to reproduce that style just a bit over on thise site.
	</p>
</div>
<div>
	<ul>
		<li><a href='https://int10h.org/oldschool-pc-fonts/readme/'>The Ultimate Oldschool PC Font Pack</a></li>
		<li><a href='https://sadconsole.com/'>SadConsole</a></li>
	</ul>
</div>

<h2><a id='donate'>Donate</a></h2>
<div>
    <p>
        Buy your favorite computer programmer a cup of coffee! :-D
        All donated funds will go towards the encouragement of producing more content for this site.
    </p>
</div>
<div>
    <form action="https://www.paypal.com/donate" method="post" target="_top">
        <input type="hidden" name="hosted_button_id" value="JWKQ3HKCTVNWN" />
        <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
        <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />
    </form>
</div>

</body>
</html>